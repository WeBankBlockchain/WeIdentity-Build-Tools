webpackJsonp([16],{lPNF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("/p82"),i={data:function(){return{accountForm:{account:""},dialog:{dialogUserListVisible:!1,userListPage:{userList:[],pageIndex:1,pageSize:5,total:0,selectedRow:null}},useWeBase:!1}},methods:{createAdminByWeBase:function(){var t=this,e={};e.userId=this.dialog.userListPage.selectedRow.userId,s.a.doPost("webase/createAdmin",e).then(function(e){0===e.data.errorCode?(t.$alert("账户切换成功!","温馨提示",{}).catch(function(){}),t.dialog.dialogUserListVisible=!1,t.init()):t.$alert("账户切换失败!","温馨提示",{}).catch(function(){})})},showUserList:function(){this.queryUserList()},chooseUser:function(){var t=this;if(null!==this.dialog.userListPage.selectedRow){var e=this.dialog.userListPage.selectedRow.address;this.$confirm("确定使用["+e+"]作为WeID的账户吗?","温馨提示",{closeOnClickModal:!1,cancelButtonClass:"el-button--primary",dangerouslyUseHTMLString:!0}).then(function(e){t.createAdminByWeBase()}).catch(function(){})}else this.$alert("请选择用户!","温馨提示",{}).catch(function(){})},indexChange:function(t){this.dialog.userListPage.pageIndex=t,this.queryUserList()},queryUserList:function(){var t=this,e={};e.pageIndex=this.dialog.userListPage.pageIndex,e.pageSize=this.dialog.userListPage.pageSize,s.a.doGet("webase/queryUserList",e).then(function(e){0===e.data.errorCode&&(t.dialog.userListPage.userList=e.data.result.dataList,t.dialog.userListPage.total=e.data.result.allCount,t.dialog.dialogUserListVisible=!0),t.dialog.userListPage.selectedRow=null})},loadConfig:function(){var t=this;s.a.doGet("loadConfig").then(function(e){0===e.data.errorCode&&(t.useWeBase=JSON.parse(e.data.result.useWeBase))})},init:function(){var t=this;s.a.doGet("checkAdmin").then(function(e){""!==e.data.result&&(t.accountForm.account=e.data.result,t.loadConfig())})}},mounted:function(){this.init()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content section_main"},[a("div",{staticClass:"box",staticStyle:{width:"55%","margin-left":"200px"}},[a("div",{staticClass:"card card-primary warning_box",attrs:{id:"AccountDiv"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("form",{attrs:{role:"form",id:"AccountForm"}},[a("div",{staticClass:"form-group",attrs:{id:"accountDiv"}},[a("el-form",{ref:"accountForm",attrs:{model:t.accountForm}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{placeholder:"Enter account",readOnly:""},model:{value:t.accountForm.account,callback:function(e){t.$set(t.accountForm,"account",e)},expression:"accountForm.account"}})],1)],1)],1)]),t._v(" "),t._m(2)]),t._v(" "),a("div",{staticClass:"db-part"},[t.useWeBase?a("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:t.showUserList}},[t._v("切换账户")]):t._e()],1)])])]),t._v(" "),a("el-dialog",{staticClass:"dialog-view",attrs:{title:"WeBASE账户列表",width:"40%",visible:t.dialog.dialogUserListVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"dialogUserListVisible",e)}}},[a("el-table",{attrs:{data:t.dialog.userListPage.userList,border:"true",cellpadding:"0",cellspacing:"0"}},[a("el-table-column",{attrs:{label:"选择",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.row},model:{value:t.dialog.userListPage.selectedRow,callback:function(e){t.$set(t.dialog.userListPage,"selectedRow",e)},expression:"dialog.userListPage.selectedRow"}},[a("span")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"long_words",attrs:{title:e.row.userName}},[t._v(t._s(e.row.userName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"用户账户",width:"350"}}),t._v(" "),a("el-table-column",{attrs:{property:"createTime",label:"创建时间",width:"170"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.dialog.userListPage.pageIndex,"page-size":t.dialog.userListPage.pageSize,layout:"total, prev, pager, next, jumper",total:t.dialog.userListPage.total},on:{"current-change":t.indexChange}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"width_100",attrs:{type:"primary"},on:{click:t.chooseUser}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",[this._v("WeID 账户")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-mark"},[e("div",{staticClass:"card-mark-text"},[this._v("当前管理员的 WeID")]),this._v(" "),e("div",{staticClass:"card-mark-icon"},[e("a",{attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#weid",target:"blank_"}},[e("img",{staticClass:"icon_question",attrs:{src:a("JaJV"),alt:""}}),this._v(" "),e("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("什么是管理员？")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sql_warning bg_color",staticStyle:{right:"-160px"}},[e("a",{attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#weid",target:"blank_"}},[e("img",{staticClass:"icon_question",attrs:{src:a("JaJV"),alt:""}}),this._v(" "),e("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("点击查看配置配置教程")])])])}]},r=a("C7Lr")(i,o,!1,null,null,null);e.default=r.exports}});