webpackJsonp([20],{Hi0r:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("/p82"),i={data:function(){return{deployForm:{applyName:"",chainId:""},deployed:!1,hash:"",dialog:{dialogDetailVisible:!1,deployMessages:[]},deployBtn:null}},methods:{checkInput:function(){return""===this.deployForm.chainId?(this.$alert("请输入ChainId!","温馨提示",{}).catch(function(){}),!1):""!==this.deployForm.applyName||(this.$alert("请输入应用名!","温馨提示",{}).catch(function(){}),!1)},comfirmBtn:function(){this.dialog.dialogDetailVisible=!1,this.deployed&&this.setGuideStatus()},toIndex:function(t){this.deployBtn=t.currentTarget,this.deployed?this.setGuideStatus():this.deploy()},deploy:function(){var t=this;this.checkInput()&&(this.deployed=!1,this.disableBtn(this.deployBtn),this.dialog.dialogDetailVisible=!0,this.dialog.deployMessages=[],this.dialog.deployMessages.push("合约部署中..."),a.a.doPost("deploy",this.deployForm,120).then(function(e){t.dialog.dialogDetailVisible=!0,0===e.data.errorCode?(t.hash=e.data.result,t.isEnableMasterCns()):(t.dialog.deployMessages.push("合约部署失败! 请查看日志。"),t.enableBtn(t.deployBtn))}))},isEnableMasterCns:function(){var t=this;a.a.doGet("isEnableMasterCns").then(function(e){t.dialog.dialogDetailVisible=!0,e.data.result?t.enableHash():(t.dialog.deployMessages.push("合约部署成功! 请继续操作。"),t.deployed=!0,t.enableBtn(t.deployBtn))})},enableHash:function(){var t=this;this.dialog.deployMessages.push("合约启用中..."),a.a.doGet("enableHash/"+this.hash,null,10).then(function(e){t.dialog.dialogDetailVisible=!0,0===e.data.errorCode?(t.dialog.deployMessages.push("合约启用成功。"),t.deploySystemCpt()):(t.dialog.deployMessages.push("合约启用失败！请查看日志。"),t.enableBtn(t.deployBtn))})},deploySystemCpt:function(){var t=this;this.dialog.deployMessages.push("系统CPT部署中..."),a.a.doGet("deploySystemCpt/"+this.hash,null,10).then(function(e){0===e.data.errorCode?(t.deployed=!0,t.dialog.deployMessages.push("系统CPT部署成功。"),t.dialog.deployMessages.push("系统CP部署成功! 请继续操作。")):t.dialog.deployMessages.push("系统CPT部署失败！请查看日志。"),t.dialog.dialogDetailVisible=!0,t.enableBtn(t.deployBtn)})},prev:function(){localStorage.setItem("step",4),this.$router.push({name:"step4"})},setGuideStatus:function(){var t=this;a.a.doPost("setGuideStatus",{step:"5"}).then(function(e){localStorage.setItem("step",""),t.$router.push({name:"deployWeId"})})}},mounted:function(){this.checkStep()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_view_content"},[a("div",{staticClass:"app_view_register"},[a("section",{staticClass:"content"},[t._m(0),t._v(" "),a("div",{staticClass:"container-fluid guild-step"},[a("div",{staticClass:"box"},[a("div",{staticClass:"card card-primary warning_box",attrs:{id:"AccountDiv"}},[t._m(1),t._v(" "),a("el-form",{ref:"deployForm",attrs:{model:t.deployForm}},[a("div",{staticClass:"card-body role_body"},[a("div",{staticClass:"form-group",staticStyle:{width:"100%"}},[a("a",{attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/weidentity-spec.html?highlight=chain-id#id4",target:"blank_"}},[a("span",{staticStyle:{color:"#017CFF"}},[a("img",{staticClass:"icon_question",attrs:{src:s("JaJV"),alt:""}}),t._v(" 什么是chain id?")])]),t._v(" "),a("el-form-item",{attrs:{prop:"chainId",rules:{required:!0,message:"请输入ChainId",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Enter chainId",maxlength:"30",onKeyUp:"this.value=this.value.replace(/\\D/g,'')"},on:{blur:function(e){t.deployForm.chainId=e.target.value}},model:{value:t.deployForm.chainId,callback:function(e){t.$set(t.deployForm,"chainId",e)},expression:"deployForm.chainId"}})],1)],1)]),t._v(" "),a("div",{staticClass:"card-header",staticStyle:{"margin-top":"-5px"}},[a("h3",[t._v("为应用设置名字")])]),t._v(" "),a("div",{staticClass:"card-body role_body"},[a("div",{staticClass:"form-group",staticStyle:{width:"100%"}},[a("span",{staticStyle:{display:"block",color:"gray","padding-bottom":"10px"}},[t._v("给自己的WeIdentity区块链应用起一个名字吧，用于在同一条链上区别不同的 WeIdentity 应用，例如“学历证书应用”，“区块链证件应用”。")]),t._v(" "),a("el-form-item",{attrs:{prop:"applyName",rules:{required:!0,message:"请输入应用名",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Enter applyName",maxlength:"30"},model:{value:t.deployForm.applyName,callback:function(e){t.$set(t.deployForm,"applyName",e)},expression:"deployForm.applyName"}})],1)],1)])]),t._v(" "),a("div",{staticClass:"bt-part"},[a("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:t.prev}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:function(e){return t.toIndex(e)}}},[t._v("下一步")])],1),t._v(" "),t._m(2)],1)])]),t._v(" "),a("el-dialog",{staticClass:"dialog-view",attrs:{title:"合约部署",width:"400px",visible:t.dialog.dialogDetailVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"dialogDetailVisible",e)}}},[a("div",{staticClass:"dialog-body deployMessage"},t._l(t.dialog.deployMessages,function(e){return a("p",{key:e.value},[t._v(t._s(e))])}),0),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"width_100",attrs:{type:"primary"},on:{click:t.comfirmBtn}},[t._v("确 定")])],1)])],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"guide_step_part box"},[a("div",{staticClass:"bottom_line"}),t._v(" "),a("div",{staticClass:"guide_step_item guide_step_complated"},[a("span",[t._v("1")]),t._v(" "),a("img",{attrs:{src:s("LyBL"),alt:""}}),t._v(" "),a("p",[t._v("区块链节点配置")])]),t._v(" "),a("div",{staticClass:"guide_step_item guide_step_complated"},[a("span",[t._v("2")]),t._v(" "),a("img",{attrs:{src:s("LyBL"),alt:""}}),t._v(" "),a("p",[t._v("设置主群组")])]),t._v(" "),a("div",{staticClass:"guide_step_item guide_step_complated"},[a("span",[t._v("3")]),t._v(" "),a("img",{attrs:{src:s("LyBL"),alt:""}}),t._v(" "),a("p",[t._v("数据库配置(可选)")])]),t._v(" "),a("div",{staticClass:"guide_step_item guide_step_complated"},[a("span",[t._v("4")]),t._v(" "),a("img",{attrs:{src:s("LyBL"),alt:""}}),t._v(" "),a("p",[t._v("创建管理员WeID")])]),t._v(" "),a("div",{staticClass:"guide_step_item guide_step_active"},[a("span",[t._v("5")]),t._v(" "),a("img",{attrs:{src:s("LyBL"),alt:""}}),t._v(" "),a("p",{staticStyle:{width:"200px",left:"-89px"}},[t._v("部署WeIdentity智能合约")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",[this._v("为WeIdentity DID 设置链ID （chain-id）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sql_warning",staticStyle:{right:"-160px"}},[e("a",{staticStyle:{display:"block"},attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#weid-deploy",target:"blank_"}},[e("img",{staticClass:"icon_question",attrs:{src:s("JaJV"),alt:""}}),this._v(" "),e("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("点击查看配置配置教程")])])])}]},o=s("C7Lr")(i,l,!1,null,null,null);e.default=o.exports}});