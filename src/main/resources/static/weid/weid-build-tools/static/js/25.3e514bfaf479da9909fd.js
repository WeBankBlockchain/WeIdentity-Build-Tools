webpackJsonp([25],{hKyz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("/p82"),i={data:function(){return{dataForm:{address:"",appKey:"",appSecret:"",text:""},configMode:1}},methods:{active:function(t){localStorage.setItem("configMode",t),this.configMode=t},inputChange:function(){var t=!0;if(""!==this.dataForm.text&&null!==this.dataForm.text){var e=this.dataForm.text.split(",");e.length>=3&&(this.dataForm.address=e[0],this.dataForm.appKey=e[1],this.dataForm.appSecret=e[2],t=!1,sessionStorage.setItem("weBaseText",this.dataForm.text))}t&&(this.dataForm.address="",this.dataForm.appKey="",this.dataForm.appSecret="")},next:function(t){1===this.configMode?this.setNoWeBaseMode():this.setWeBaseMode(t)},setNoWeBaseMode:function(){var t=this;s.a.doPost("webase/setNoWeBaseMode").then(function(e){0===e.data.errorCode&&(localStorage.setItem("step",0),t.$router.push({name:"step0"}))})},setWeBaseMode:function(t){var e=this,a={};if(a.weBaseHost=this.dataForm.address,a.appKey=this.dataForm.appKey,a.appSecret=this.dataForm.appSecret,a.weIdHost=window.location.host,""!==a.weBaseHost)if(""!==a.appKey)if(""!==a.appSecret){var i=t.currentTarget;this.disableBtn(i),s.a.doPostByJson("webase/registerApp",a).then(function(t){e.enableBtn(i),0===t.data.errorCode?(localStorage.setItem("step",0),e.$router.push({name:"step0"})):e.$alert("请求发生异常，请查看后台日志!","温馨提示",{}).catch(function(){})})}else this.$alert("请输入appSecret!","温馨提示",{}).catch(function(){});else this.$alert("请输入appKey!","温馨提示",{}).catch(function(){});else this.$alert("请输入WeBASE服务地址!","温馨提示",{}).catch(function(){})},init:function(){var t=localStorage.getItem("configMode");this.configMode=""===t||null===t?1:parseInt(t),this.dataForm.text=sessionStorage.getItem("weBaseText"),this.inputChange()}},mounted:function(){this.init()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_view_content"},[a("div",{staticClass:"app_view_register"},[a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid guild-step",staticStyle:{"padding-top":"10px"}},[a("div",{staticClass:"box"},[a("div",{staticClass:"card card-primary warning_box",attrs:{id:"AccountDiv"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("el-form",{ref:"dataForm",staticStyle:{"margin-top":"15px"},attrs:{model:t.dataForm,"label-position":"right","label-width":"150px"}},[a("div",{staticClass:"form-group",attrs:{id:"createDiv"}},[a("div",{class:{"key_item active_key":1===t.configMode,key_item:1!==t.configMode},attrs:{type:"1"},on:{click:function(e){return t.active(1)}}},[a("span",{staticClass:"item_out_role"},[a("span")]),t._v(" "),a("p",[t._v("WeID原始模式")])]),t._v(" "),a("div",{class:{"key_item active_key":2===t.configMode,key_item:2!==t.configMode},attrs:{type:"1"},on:{click:function(e){return t.active(2)}}},[a("span",{staticClass:"item_out_role"},[a("span")]),t._v(" "),a("p",[t._v("WeID + WeBASE集成模式")])])]),t._v(" "),2===t.configMode?a("div",{staticStyle:{"margin-top":"30px"}},[a("div",{staticClass:"card-header card-title"},[a("h3",[t._v("WeBASE配置")])]),t._v(" "),a("el-form-item",{attrs:{label:"粘贴区:",prop:"org_id"}},[a("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"Your can copy data from WeBASE",resize:"none",type:"textarea"},nativeOn:{keyup:function(e){return t.inputChange()}},model:{value:t.dataForm.text,callback:function(e){t.$set(t.dataForm,"text",e)},expression:"dataForm.text"}}),t._v(" "),a("div",{staticClass:"mark-bottom"},[a("div",[t._v("请从WeBASE管理台复制此应用的配置内容，然后粘贴此处。")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"WeBASE服务地址:",prop:"org_id"}},[a("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"Enter IP:PORT",maxlength:"30",onKeyUp:"value=value=value.replace(/[^0-9：:。.]/g,'');value=value.replace(/[。]/g,'.');value=value.replace(/[：]/g,':');value=value.replace(/\\s+/g,'');"},on:{blur:function(e){t.dataForm.address=e.target.value}},model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appKey:",prop:"org_id"}},[a("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"Enter appKey",maxlength:"30"},model:{value:t.dataForm.appKey,callback:function(e){t.$set(t.dataForm,"appKey",e)},expression:"dataForm.appKey"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"appSecret:",prop:"org_id"}},[a("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"Enter appSecret",maxlength:"30"},model:{value:t.dataForm.appSecret,callback:function(e){t.$set(t.dataForm,"appSecret",e)},expression:"dataForm.appSecret"}})],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"card-footer bt-part",attrs:{id:"role-next"}},[a("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:function(e){return t.next(e)}}},[t._v("下一步")])],1),t._v(" "),t._m(2)],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h6",[this._v("请选择配置模式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-mark"},[e("div",{staticClass:"card-mark-text"},[e("div",[this._v("1. WeID原始模式: 原WeID的引导配置步骤。")]),this._v(" "),e("div",[this._v("2. WeID+WeBASE集成模式: 原WeID的引导配置过程中可选择WeBASE同步的数据,如: 节点，账户等数据，且合约部署会同步到WeBASE。")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sql_warning",staticStyle:{right:"-160px"}},[e("a",{staticStyle:{display:"block"},attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#mode-selection",target:"blank_"}},[e("img",{staticClass:"icon_question",attrs:{src:a("JaJV"),alt:""}}),this._v(" "),e("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("点击查看配置配置教程")])])])}]},o=a("C7Lr")(i,r,!1,null,null,null);e.default=o.exports}});