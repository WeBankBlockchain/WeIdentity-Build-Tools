webpackJsonp([21],{Ffpd:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("/p82"),a={data:function(){return{roleType:localStorage.getItem("roleType"),createType:1,accountForm:{account:""},dialog:{dialogVisible:!1,fileForm:{privateKeyFile:"",privateKeyFileName:""}},isExistsAdmin:!1,title:"创建管理员WeID"}},methods:{active:function(t){this.createType=t},createAdmin:function(){var t=this,i=new FormData;if(2===this.createType){if(""===this.dialog.fileForm.privateKeyFile)return void this.$alert("请选择私钥文件!","温馨提示",{}).catch(function(){});i.append("ecdsa",this.dialog.fileForm.privateKeyFile)}s.a.doPostAndUploadFile("createAdmin",i).then(function(i){0===i.data.errorCode?(t.$alert("账户创建成功!","温馨提示",{}).catch(function(){}),t.init()):t.$alert("账户创建失败!","温馨提示",{}).catch(function(){})})},setGuideStatus:function(){var t=this;s.a.doPost("setGuideStatus",{step:"5"}).then(function(i){localStorage.setItem("step",0),t.$router.push({name:"deployWeId"})})},next:function(){var t=this;this.isExistsAdmin?"2"===this.roleType?this.setGuideStatus():this.$router.push({name:"step5"}):2===this.createType?this.dialog.dialogVisible=!0:this.$confirm("请确认，系统将自动为管理员的 WeID 创建公私钥?","温馨提示",{closeOnClickModal:!1,cancelButtonClass:"el-button--primary",dangerouslyUseHTMLString:!0}).then(function(i){t.createAdmin()}).catch(function(){})},prev:function(){this.$router.push({name:"step3"})},chooseFile:function(t){var i=this,e=document.getElementById(t);e.value="",e.click(),e.onchange=function(t){t.target.files[0]&&(i.dialog.fileForm.privateKeyFileName=t.target.files[0].name,i.dialog.fileForm.privateKeyFile=t.target.files[0])}},init:function(){var t=this;s.a.doGet("checkAdmin").then(function(i){""!==i.data.result?(t.isExistsAdmin=!0,t.title="当前管理员的 WeID 已经存在（目前不支持修改）",t.accountForm.account=i.data.result):(t.isExistsAdmin=!1,t.title="创建管理员WeID")}),this.dialog.dialogVisible=!1}},created:function(){localStorage.setItem("step",4),this.init()}},l={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"app_view_content"},[s("div",{staticClass:"app_view_register"},[s("section",{staticClass:"content"},[s("div",{staticClass:"guide_step_part box"},[s("div",{staticClass:"bottom_line"}),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),"1"==t.roleType?s("div",{staticClass:"guide_step_item"},[s("span",[t._v("5")]),t._v(" "),s("img",{attrs:{src:e("LyBL"),alt:""}}),t._v(" "),s("p",{staticStyle:{width:"200px",left:"-89px"}},[t._v("部署WeIdentity智能合约")])]):t._e()]),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"box"},[s("div",{staticClass:"card card-primary warning_box",attrs:{id:"AccountDiv"}},[s("div",{staticClass:"card-header"},[s("h3",[t._v(t._s(t.title))])]),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"card-body",staticStyle:{"margin-top":"15px"}},[s("el-form",{ref:"accountForm",attrs:{model:t.accountForm}},[!1===t.isExistsAdmin?s("div",{staticClass:"form-group",attrs:{id:"createDiv"}},[s("div",{class:{"key_item active_key":1===t.createType,key_item:1!==t.createType},attrs:{type:"1"},on:{click:function(i){return t.active(1)}}},[s("span",{staticClass:"item_out_role"},[s("span")]),t._v(" "),s("p",[t._v("系统自动创建公私钥")])]),t._v(" "),s("div",{class:{"key_item active_key":2===t.createType,key_item:2!==t.createType},attrs:{type:"1"},on:{click:function(i){return t.active(2)}}},[s("span",{staticClass:"item_out_role"},[s("span")]),t._v(" "),s("p",[t._v("自行上传私钥")])])]):t._e(),t._v(" "),!0===t.isExistsAdmin?s("div",{staticClass:"form-group",attrs:{id:"accountDiv"}},[s("el-form-item",{attrs:{prop:"account"}},[s("el-input",{staticStyle:{width:"100%"},attrs:{readOnly:""},model:{value:t.accountForm.account,callback:function(i){t.$set(t.accountForm,"account",i)},expression:"accountForm.account"}})],1)],1):t._e(),t._v(" "),s("div",{staticClass:"bt-part",attrs:{id:"nextDiv"}},[s("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:t.prev}},[t._v("上一步")]),t._v(" "),s("el-button",{staticClass:"btn btn_150",attrs:{type:"primary"},on:{click:t.next}},[t._v("下一步")])],1)]),t._v(" "),t._m(5)],1)])])]),t._v(" "),s("el-dialog",{staticClass:"dialog-view",attrs:{title:"自行上传私钥",width:"30%",visible:t.dialog.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(i){return t.$set(t.dialog,"dialogVisible",i)}}},[s("div",{staticClass:"dialog-body"},[s("el-form",{attrs:{model:t.dialog.fileForm}},[s("div",{staticClass:"file_part",staticStyle:{"margin-top":"15px"}},[s("el-form-item",[s("div",{staticClass:"mark-text"},[s("span",[t._v("备注：支持椭圆曲线的公私钥，并且为十进制私钥数据。")]),t._v(" "),s("a",{attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/weidentity-quick-tools-web.html?highlight=创建密钥#weid",target:"blank_"}},[s("img",{staticClass:"icon_question",attrs:{src:e("JaJV"),alt:""}}),t._v(" "),s("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[t._v("如何生成私钥？")])])]),t._v(" "),s("div",{staticClass:"input_item",staticStyle:{"margin-bottom":"-8px"}},[s("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请选择私钥文件",maxlength:"30",readOnly:""},model:{value:t.dialog.fileForm.privateKeyFileName,callback:function(i){t.$set(t.dialog.fileForm,"privateKeyFileName",i)},expression:"dialog.fileForm.privateKeyFileName"}}),t._v(" "),s("button",{staticClass:"upload-btn btn btn-block btn-primary btn-flat",attrs:{type:"button"},on:{click:function(i){return t.chooseFile("privateKeyFile")}}},[t._v("选择文件")])],1)]),t._v(" "),s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"privateKeyFile"}})],1)])],1),t._v(" "),s("div",{staticClass:"dialog-footer width_100",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"width_100",attrs:{type:"primary"},on:{click:function(i){return t.createAdmin()}}},[t._v("确 定")])],1)])],1)])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"guide_step_item guide_step_complated"},[i("span",[this._v("1")]),this._v(" "),i("img",{attrs:{src:e("LyBL"),alt:""}}),this._v(" "),i("p",[this._v("区块链节点配置")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"guide_step_item guide_step_complated"},[i("span",[this._v("2")]),this._v(" "),i("img",{attrs:{src:e("LyBL"),alt:""}}),this._v(" "),i("p",[this._v("设置主群组")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"guide_step_item guide_step_complated"},[i("span",[this._v("3")]),this._v(" "),i("img",{attrs:{src:e("LyBL"),alt:""}}),this._v(" "),i("p",[this._v("数据库配置(可选)")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"guide_step_item guide_step_active"},[i("span",[this._v("4")]),this._v(" "),i("img",{attrs:{src:e("LyBL"),alt:""}}),this._v(" "),i("p",[this._v("创建管理员WeID")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"card-mark"},[i("a",{staticStyle:{display:"block"},attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#weid",target:"blank_"}},[i("img",{staticClass:"icon_question",attrs:{src:e("JaJV"),alt:""}}),this._v(" "),i("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("什么是管理员？")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"sql_warning",staticStyle:{right:"-160px"}},[i("a",{staticStyle:{display:"block"},attrs:{href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/deploy-via-web.html#weid",target:"blank_"}},[i("img",{staticClass:"icon_question",attrs:{src:e("JaJV"),alt:""}}),this._v(" "),i("span",{staticClass:"icon_question",staticStyle:{color:"#017CFF","font-size":"12px",display:"inline-block"}},[this._v("点击查看配置配置教程")])])])}]},c=e("C7Lr")(a,l,!1,null,null,null);i.default=c.exports}});