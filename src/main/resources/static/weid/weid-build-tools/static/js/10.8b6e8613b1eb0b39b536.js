webpackJsonp([10],{OVdG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),r=a.n(i),n=a("J0Oq"),o=a.n(n),s=a("/p82"),l=a("gej+"),c={data:function(){return{page:{issuerList:[],pageSize:5,total:0,pageIndex:1},dialog:{registForm:{name:"",weId:"",description:""},dialogFormVisible:!1}}},methods:{showAll:function(t){this.$alert(t,"温馨提示",{}).catch(function(){})},showRegistIssuer:function(){l.a.data.nodeStatus?(this.dialog.registForm.name="",this.dialog.registForm.weId="",this.dialog.registForm.description="",this.dialog.dialogFormVisible=!0):l.a.checkNodeState(!0)},registerIssuer:function(){var t=this;""!==this.dialog.registForm.weId?""!==this.dialog.registForm.name?0!==this.dialog.registForm.name.indexOf("@")?s.a.doPost("registerIssuer",this.dialog.registForm).then(function(e){0===e.data.errorCode?(t.$alert("权威凭证发行者注册成功!","温馨提示",{}).then(function(){t.dialog.dialogFormVisible=!1}).catch(function(){}),t.dialog.registForm.weId="",t.dialog.registForm.name="",t.dialog.registForm.description="",t.page.pageIndex=1,t.init()):t.$alert(e.data.errorMessage,"温馨提示",{}).catch(function(){})}):this.$alert("权威机构名称输入非法!","温馨提示",{}).catch(function(){}):this.$alert("请输入权威机构名称!","温馨提示",{}).catch(function(){}):this.$alert("请输入WeID!","温馨提示",{}).catch(function(){})},deleteRow:function(t){var e=this;this.$confirm("确认删除该权威机构？","温馨提示",{closeOnClickModal:!1,cancelButtonClass:"el-button--primary"}).then(function(a){var i={};i.weId=t,s.a.doPost("removeIssuer",i).then(function(t){0===t.data.errorCode?(e.$alert("删除成功!","温馨提示",{}).then(function(){}).catch(function(){}),e.init()):e.$alert(t.data.errorMessage,"温馨提示",{}).catch(function(){})})}).catch(function(){})},recognizeAuthorityIssuer:function(t){var e=this;this.$confirm("是否确定认证该权威机构？","温馨提示",{closeOnClickModal:!1,cancelButtonClass:"el-button--primary"}).then(function(a){var i={};i.weId=t,s.a.doPost("recognizeAuthorityIssuer",i).then(function(t){0===t.data.errorCode?(e.$alert("认证成功!","温馨提示",{}).then(function(){}).catch(function(){}),e.init()):e.$alert(t.data.errorMessage,"温馨提示",{}).catch(function(){})})}).catch(function(){})},deRecognizeAuthorityIssuer:function(t){var e=this;this.$confirm("是否确定撤销该权威机构认证？","温馨提示",{closeOnClickModal:!1,cancelButtonClass:"el-button--primary"}).then(function(a){var i={};i.weId=t,s.a.doPost("deRecognizeAuthorityIssuer",i).then(function(t){0===t.data.errorCode?(e.$alert("撤销成功!","温馨提示",{}).then(function(){}).catch(function(){}),e.init()):e.$alert(t.data.errorMessage,"温馨提示",{}).catch(function(){})})}).catch(function(){})},indexChange:function(t){t<1&&(t=1),this.page.pageIndex=t,this.queryIssueList()},queryIssueList:function(){var t=this,e={};e.iDisplayStart=(this.page.pageIndex-1)*this.page.pageSize,e.iDisplayLength=this.page.pageSize,s.a.doGet("getIssuerList",e).then(function(e){0===e.data.errorCode&&(t.page.issuerList=e.data.result.dataList,t.page.total=e.data.result.allCount),0!==t.page.total&&t.page.total===t.page.pageSize*(t.page.pageIndex-1)&&t.indexChange(t.page.pageIndex-1)})},init:function(){this.queryIssueList()},dateFormat:function(t){return new Date(parseInt(1e3*t.createTime)+288e5).toJSON().substr(0,19).replace("T"," ")},check:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.checkNodeState(!0);case 2:l.a.data.nodeStatus&&t.init();case 3:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.check()}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"content app_main"},[i("el-row",{staticClass:"app_main_header_row"},[i("el-col",{attrs:{span:3}},[i("el-button",{staticClass:"btn",staticStyle:{width:"170px"},attrs:{type:"primary"},on:{click:t.showRegistIssuer}},[t._v("注册权威凭证发行者")])],1),t._v(" "),i("el-col",{staticClass:"head-icon",staticStyle:{"padding-left":"18px"},attrs:{span:20}},[i("a",{attrs:{target:"blank",href:"https://weidentity.readthedocs.io/zh_CN/latest/docs/weidentity-quick-tools-web.html?highlight=权威凭证发行者#authority-issuer"}},[i("img",{staticClass:"icon_question",attrs:{src:a("JaJV"),alt:""}}),t._v(" "),i("span",{staticClass:"icon_question"},[t._v("权威凭证发行者使用教程")])])])],1),t._v(" "),i("div",{staticClass:"app_view"},[i("el-table",{attrs:{data:t.page.issuerList,border:"true",align:"center"}},[i("el-table-column",{attrs:{prop:"name",label:"权威机构名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"long_words",attrs:{title:e.row.name}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"weId",label:"WeID",align:"center",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:" link",attrs:{title:e.row.weId},on:{click:function(a){return t.showAll(e.row.weId)}}},[t._v(t._s(e.row.weIdShow))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"recognized",label:"状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===e.row.recognized?i("img",{staticClass:"icon_question",attrs:{src:a("MeCv"),widht:"50",height:"50",alt:""}}):t._e(),t._v(" "),!1===e.row.recognized?i("img",{staticClass:"icon_question",attrs:{src:a("B7UN"),widht:"50",height:"50",alt:""}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"description",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"long_words",attrs:{title:e.row.description}},[t._v(t._s(e.row.description))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",formatter:t.dateFormat,width:"170"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.recognized?i("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){return t.deRecognizeAuthorityIssuer(e.row.weId)}}},[t._v("撤销")]):i("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){return t.recognizeAuthorityIssuer(e.row.weId)}}},[t._v("认证")]),t._v(" "),i("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(a){return t.deleteRow(e.row.weId)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.page.pageIndex,"page-size":t.page.pageSize,layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"current-change":t.indexChange}})],1),t._v(" "),i("el-dialog",{staticClass:"dialog-view",attrs:{title:"注册权威凭证发行者",width:"29%",visible:t.dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"dialogFormVisible",e)}}},[i("div",{staticClass:"dialog-body"},[i("el-form",{attrs:{model:t.dialog.registForm}},[i("el-form-item",{attrs:{label:"机构的WeID","label-width":t.formLabelWidth}},[i("div",{staticClass:"mark-text"},[i("span",[t._v("说明：由各机构提供其“WeID”和“权威机构名称”，给到联盟链委员会的成员，由成员完成“权威凭证发行者”的注册。")])]),t._v(" "),i("el-input",{attrs:{onkeyup:"this.value=this.value.replace(/[^\\w：:]/g,'');this.value=this.value.replace(/：/g,':');",placeholder:"填入这个机构WeID"},on:{blur:function(e){t.dialog.registForm.weId=e.target.value}},model:{value:t.dialog.registForm.weId,callback:function(e){t.$set(t.dialog.registForm,"weId",e)},expression:"dialog.registForm.weId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"权威机构名称","label-width":t.formLabelWidth}},[i("div",{staticClass:"mark-text"},[i("span",[t._v("\n              输入权威机构的名称（建议由英文或者数字组成，不建议包含类似空格字符的特殊符号，也不支持中文），\n              作为类似权威机构 ID 的方式使用，例如如果机构是微众银行，则可以输入类似“webank”作为其权威机构名称\n            ")])]),t._v(" "),i("el-input",{attrs:{onkeyup:"this.value=this.value.replace(/[^a-zA-Z0-9]/g,'')",placeholder:"Enter issuer name"},on:{blur:function(e){t.dialog.registForm.name=e.target.value}},model:{value:t.dialog.registForm.name,callback:function(e){t.$set(t.dialog.registForm,"name",e)},expression:"dialog.registForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[i("el-input",{attrs:{placeholder:"Enter issuer description"},model:{value:t.dialog.registForm.description,callback:function(e){t.$set(t.dialog.registForm,"description",e)},expression:"dialog.registForm.description"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"width_100",attrs:{type:"primary"},on:{click:function(e){return t.registerIssuer()}}},[t._v("注 册")])],1)])],1)},staticRenderFns:[]},u=a("C7Lr")(c,d,!1,null,null,null);e.default=u.exports}});